<div class="alarmas-container">
  <!-- Header -->
  <div class="card-header">
    <h2>ğŸ”” Alertas de VacunaciÃ³n</h2>
    <span class="total-alarmas">{{ alarmas.length }} alertas</span>
  </div>

  <!-- Loading -->
  <div *ngIf="cargando" class="loading">
    â³ Cargando alertas...
  </div>

  <!-- Tabla de alarmas -->
  <table *ngIf="!cargando && alarmas.length > 0" class="table">
    <thead>
      <tr>
        <th>IdentificaciÃ³n</th>
        <th>Nombre Paciente</th>
        <th>TelÃ©fono</th>
        <th>Vacuna</th>
        <th>Dosis</th>
        <th>Fecha PrÃ³xima Dosis</th>
        <th>Estado</th>
        <th>Mensaje</th>
        <th>AcciÃ³n</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let alarma of alarmas">
        <td class="numero-id">{{ alarma.numero_id }}</td>
        <td class="nombre-paciente">{{ alarma.nombre_completo || 'N/A' }}</td>
        <td class="telefono">{{ alarma.telefono || 'Sin telÃ©fono' }}</td>
        <td>{{ alarma.nombre_vacuna || 'N/A' }}</td>
        <td>{{ alarma.dosis }}</td>
        <td>
          <span *ngIf="alarma.fecha_proxima_dosis">
            {{ alarma.fecha_proxima_dosis | date:'dd/MM/yyyy' }}
          </span>
          <span *ngIf="!alarma.fecha_proxima_dosis" class="sin-fecha">
            Sin fecha
          </span>
        </td>
        <td>
          <span class="estado-badge" [ngClass]="getEstadoClase(alarma)">
            {{ getEstadoTexto(alarma) }}
          </span>
        </td>
        <td class="mensaje">{{ alarma.mensaje }}</td>
        <td class="acciones">
          <button 
            *ngIf="puedeMarcar(alarma)"
            class="btn-marcar" 
            (click)="marcarAtendida(alarma.id)">
            âœ“ Marcar Atendida
          </button>
          <span *ngIf="!puedeMarcar(alarma)" class="atendida-label">
            âœ“ Atendida
          </span>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Sin datos -->
  <div *ngIf="!cargando && alarmas.length === 0" class="sin-datos">
    ğŸ“­ No hay alertas registradas
  </div>

  <!-- Leyenda -->
  <div class="leyenda">
    <h3>ğŸ“Š Leyenda de Estados:</h3>
    <div class="leyenda-items">
      <div class="leyenda-item">
        <span class="estado-badge vencida">ğŸ”´ Vencida</span>
        <p>La fecha de la prÃ³xima dosis ya pasÃ³</p>
      </div>
      <div class="leyenda-item">
        <span class="estado-badge proxima">ğŸŸ¡ PrÃ³xima</span>
        <p>La prÃ³xima dosis estÃ¡ en los prÃ³ximos 7 dÃ­as</p>
      </div>
      <div class="leyenda-item">
        <span class="estado-badge pendiente">â³ Pendiente</span>
        <p>AÃºn falta tiempo para la prÃ³xima dosis</p>
      </div>
      <div class="leyenda-item">
        <span class="estado-badge vacunado">âœ… Vacunado</span>
        <p>El paciente ya fue vacunado</p>
      </div>
    </div>
  </div>
</div>