<div class="usuario-form-container">
  <h2>üßç‚Äç‚ôÄÔ∏è Registrar / Editar Usuario</h2>

  <form (ngSubmit)="guardar()" class="form-card">
    <div class="form-grid">
      <div>
        <label>Tipo de Identificaci√≥n</label>
        <select [(ngModel)]="usuario.tipo_id" name="tipo_id" required (change)="verificarTipo()">
          <option value="" disabled selected>Seleccione...</option>
          <option value="C√âDULA DE CIUDADAN√çA">C√âDULA DE CIUDADAN√çA</option>
          <option value="TARJETA DE IDENTIDAD">TARJETA DE IDENTIDAD</option>
          <option value="C√âDULA DE EXTRANJER√çA">C√âDULA DE EXTRANJER√çA</option>
          <option value="PASAPORTE">PASAPORTE</option>
          <option value="REGISTRO CIVIL">REGISTRO CIVIL</option>
        </select>
      </div>

      <div>
        <label>N√∫mero de Identificaci√≥n</label>
        <input [(ngModel)]="usuario.numero_id" name="numero_id" required />
      </div>

      <div>
        <label>Primer Nombre</label>
        <input [(ngModel)]="usuario.primer_nombre" name="primer_nombre" required />
      </div>

      <div>
        <label>Segundo Nombre</label>
        <input [(ngModel)]="usuario.segundo_nombre" name="segundo_nombre" />
      </div>

      <div>
        <label>Primer Apellido</label>
        <input [(ngModel)]="usuario.primer_apellido" name="primer_apellido" required />
      </div>

      <div>
        <label>Segundo Apellido</label>
        <input [(ngModel)]="usuario.segundo_apellido" name="segundo_apellido" />
      </div>

      <div>
        <label>Fecha de Nacimiento</label>
        <input [(ngModel)]="usuario.fecha_nacimiento" name="fecha_nacimiento" type="date" />
      </div>

      <div>
        <label>Sexo</label>
        <select [(ngModel)]="usuario.sexo" name="sexo">
          <option value="">Seleccione...</option>
          <option value="F">Femenino</option>
          <option value="M">Masculino</option>
        </select>
      </div>

      <div>
        <label>Direcci√≥n</label>
        <input [(ngModel)]="usuario.direccion" name="direccion" />
      </div>

      <div>
        <label>Tel√©fono</label>
        <input [(ngModel)]="usuario.telefono" name="telefono" />
      </div>

      <div>
        <label>EPS</label>
        <input [(ngModel)]="usuario.eps" name="eps" />
      </div>
    </div>

    <!-- ‚úÖ Botones de acci√≥n -->
    <div class="actions">
      <button type="submit" class="btn-primary">üíæ Guardar Usuario</button>
      <button type="button" class="btn-outline" (click)="cancelar()">‚ùå Cancelar</button>
      
      <!-- üë∂ Bot√≥n para MENORES (despu√©s de guardar) -->
      <button 
        *ngIf="esNino && usuario.id" 
        type="button" 
        class="btn-secondary" 
        (click)="abrirDatosClinicos()">
         Completar Datos Cl√≠nicos del Menor
      </button>

      <!-- üßë Bot√≥n para ADULTOS (despu√©s de guardar) -->
      <button 
        *ngIf="!esNino && usuario.id" 
        type="button" 
        class="btn-secondary" 
        (click)="abrirDatosClinicos()">
        üìã Completar Datos Cl√≠nicos
      </button>
    </div>

    <!-- ‚ö†Ô∏è Mensaje informativo si a√∫n no se ha guardado -->
    <div *ngIf="!usuario.id" class="info-message">
      ‚ÑπÔ∏è Guarda primero el usuario para poder completar sus datos cl√≠nicos
    </div>
  </form>
</div>